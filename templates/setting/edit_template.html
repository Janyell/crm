{% extends "base.html" %}

{% block content %}
    {% block template-editor %}
        <div class="container">
            <a href="{% url "get_templates" %}" class="btn">Назад</a>
            <h2 class="center">{{ page_title }}</h2>
        </div>
        <form id="edit-template-form" method="post" action="">
            <div class="word-block">
                <div id="pageEditor" class="summernote">
                    {% if page %}
                        {{ page|safe }}
                    {% else %}
                        <hr />
{#                        Исх{% endif %}#}
{#                <div class="kp-number row">#}
{#                    <div class="span6">#}
{#                        Исх.№{{ number }} от {{ date }} г.#}
{#                    </div>#}
{#                    <div class="span6 pull-right">#}
{#                        для {{ organization_or_full_name }}#}
{#                    </div>#}
                    {% endif %}
                </div>
                </div>
                <div class="form-add__submits">
                    <button class="btn btn-primary" type="submit">Сохранить</button>
                </div>
                <label class="checkbox"><input type="checkbox" class="hide-border"/>Скрыть границы шапки</label>
            </div>
        </form>
        <script type="text/javascript" src="{{ STATIC_URL }}js/summernote.min.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/summernote-ru-RU.js"></script>
        <script type="text/javascript">
            (function($){
                $(document).ready(function() {
                    var options = {
                        height: 1000,
                        lang: 'ru-RU',
                        toolbar: [
                            ['font', ['bold', 'italic', 'underline', 'clear']],
                            ['image', ['image', 'floatLeft', 'floatRight','floatNone', 'shapeRounded', 'shapeCircle', 'shapeThumbnail', 'shapeNone', 'remove']],
                            ['fontname', ['fontname']],
                            ['fontsize', ['fontsize']],
                            ['para', ['paragraph']],
                            ['table', ['table']],
                            ['insert', ['link', 'picture', 'hr']]
                        ]
                    };
                    var $page = $('#pageEditor');
                    $page.summernote(options);
                    function getHTML($editor) {
                        $editor.next().find('.note-editable').html()
                    }

                    $('#editTemplateForm').submit(function() {
                        $(this).append('<input type="hidden" name="page" value="' + getHTML($page) + '">');
                    });
                });
            })(jQuery);
        </script>
    {% endblock %}
{% endblock %}